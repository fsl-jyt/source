From ff99004bb0da8b86d0574b801b2cd2cb3caac19f Mon Sep 17 00:00:00 2001
From: Kavi Akhila-B46177 <b46177@lvd5291.ap.freescale.net>
Date: Mon, 2 May 2016 14:46:40 +0530
Subject: [PATCH 2/3] LS1012AQDS-RCW:Changes in RCW

---
 Makefile                            |    2 +-
 ls1012aqds/R_SPNH_3508/rcw_1000.rcw |   59 -----------------------------------
 ls1012aqds/R_SPNH_3508/rcw_800.rcw  |   56 +++++++++++++++++++++++++++++++++
 ls1012aqds/cci_barrier_disable.rcw  |    8 -----
 ls1012aqds/clock_out.rcw            |    7 +++++
 ls1012aqds/dcsr_mbist.rcw           |    8 -----
 ls1012aqds/serdes_sata.rcw          |    3 +-
 ls1012aqds/uboot_address.rcw        |    3 +-
 ls1012ardb/R_SPNH_3508/rcw_1000.rcw |   54 --------------------------------
 ls1012ardb/R_SPNH_3508/rcw_800.rcw  |   54 ++++++++++++++++++++++++++++++++
 10 files changed, 122 insertions(+), 132 deletions(-)
 delete mode 100644 ls1012aqds/R_SPNH_3508/rcw_1000.rcw
 create mode 100644 ls1012aqds/R_SPNH_3508/rcw_800.rcw
 delete mode 100644 ls1012aqds/cci_barrier_disable.rcw
 create mode 100644 ls1012aqds/clock_out.rcw
 delete mode 100644 ls1012aqds/dcsr_mbist.rcw
 delete mode 100644 ls1012ardb/R_SPNH_3508/rcw_1000.rcw
 create mode 100644 ls1012ardb/R_SPNH_3508/rcw_800.rcw

diff --git a/Makefile b/Makefile
index 07a506f..533886d 100644
--- a/Makefile
+++ b/Makefile
@@ -1,6 +1,6 @@
 DESTDIR = .
 BOARDS = b4420qds b4860qds \
-	 ls1021aqds ls1021atwr ls1043aqds ls1043ardb \
+	 ls1021aqds ls1021atwr ls1043aqds ls1043ardb ls1012aqds ls1012ardb \
 	 p2041rdb p3041ds p4080ds p5020ds p5040ds \
 	 t1024qds t1023rdb t1024rdb t1040rdb t1042rdb t1042rdb_pi t1040qds \
 	 t2080rdb t2080qds t2081qds t4240qds t4240rdb t1040d4rdb t1042d4rdb
diff --git a/ls1012aqds/R_SPNH_3508/rcw_1000.rcw b/ls1012aqds/R_SPNH_3508/rcw_1000.rcw
deleted file mode 100644
index d25a081..0000000
--- a/ls1012aqds/R_SPNH_3508/rcw_1000.rcw
+++ /dev/null
@@ -1,59 +0,0 @@
-/*
- * LS1012AQDS RCW for SerDes Protocol 0x3508
- *
- * 1G configuration -- 1 SGMII + 1 PCI + 1 SATA
- *
- * Frequencies:
- *
- * Clock: 125 MHz
- *
- * Core		-- 1000 MHz (Mul 8)
- *
- * Serdes Lanes vs Slot information
- * B SGMII  : Slot 1
- * C PCI    : Slot 2
- * D Empty  : Slot 3
- * E SATA   : Sata Connector
- *
- * Serdes configuration
- * SRDS_PRTCL_S1	: 0x3508
- *
- */
-
-#include <ls1012a.rcwi>
-
-SYS_PLL_RAT=4
-CGA_PLL1_RAT=8
-SRDS_PRTCL_S1=13576
-SRDS_PLL_REF_CLK_SEL_S1=3
-SerDes_REFCLK_SEL=1
-SerDes_INT_REFCLK=1
-PBI_SRC=4
-SYS_PLL_SPD=1
-CGA_PLL1_SPD=1
-EC1_BASE=1
-UART1_BASE=1
-UART2_BASE_FLOW=1
-SDHC1_BASE=1
-SDHC2_BASE_DAT321=3
-SDHC2_BASE_BASE=3
-UART2_BASE_DATA=1
-EMI1_BASE=1
-CLK_OUT_BASE=1
-SDHC1_CD=1
-SDHC1_WP=1
-QSPI_DATA1_GPIO=3
-QSPI_IIC2=2
-USB1_DRVVBUS_BASE=1
-USB1_PWRFAULT_BASE=1
-SDHC1_VSEL=1
-EVDD_VSEL=2
-SYSCLK_FREQ=600
-
-
-
-#include <cci_barrier_disable.rcw>
-#include <usb_phy_freq.rcw>
-#include <uboot_address.rcw>
-#include <dcsr_mbist.rcw>
-#include <serdes_sata.rcw>
diff --git a/ls1012aqds/R_SPNH_3508/rcw_800.rcw b/ls1012aqds/R_SPNH_3508/rcw_800.rcw
new file mode 100644
index 0000000..0db90ab
--- /dev/null
+++ b/ls1012aqds/R_SPNH_3508/rcw_800.rcw
@@ -0,0 +1,56 @@
+/*
+ * LS1012AQDS RCW for SerDes Protocol 0x3508
+ *
+ * 1G configuration -- 1 SGMII + 1 PCI + 1 SATA
+ *
+ * Frequencies:
+ *
+ * Clock: 125 MHz
+ *
+ * Core		-- 800 MHz (Mul 8)
+ *
+ * Serdes Lanes vs Slot information
+ * A SGMII  : Slot 1
+ * B PCI    : Slot 2
+ * C Empty  : Slot 3
+ * D SATA   : Sata Connector
+ *
+ * Serdes configuration
+ * SRDS_PRTCL_S1	: 0x3508
+ *
+ */
+
+#include <ls1012a.rcwi>
+
+SYS_PLL_RAT=4
+CGA_PLL1_RAT=8
+SRDS_PRTCL_S1=13576
+SRDS_PLL_REF_CLK_SEL_S1=3
+SerDes_REFCLK_SEL=1
+SerDes_INT_REFCLK=1
+PBI_SRC=4
+SYS_PLL_SPD=1
+CGA_PLL1_SPD=1
+EC1_BASE=1
+UART1_BASE=1
+SDHC1_BASE=1
+SDHC2_BASE_DAT321=3
+SDHC2_BASE_BASE=3
+UART2_BASE_DATA=1
+EMI1_BASE=1
+CLK_OUT_BASE=1
+SDHC1_CD=1
+SDHC1_WP=1
+QSPI_IIC2=3
+USB1_DRVVBUS_BASE=1
+USB1_PWRFAULT_BASE=1
+SDHC1_VSEL=1
+EVDD_VSEL=2
+IIC1_BASE=1
+SYSCLK_FREQ=600
+
+
+#include <uboot_address.rcw>
+#include <usb_phy_freq.rcw>
+#include <serdes_sata.rcw>
+#include <clock_out.rcw>
diff --git a/ls1012aqds/cci_barrier_disable.rcw b/ls1012aqds/cci_barrier_disable.rcw
deleted file mode 100644
index de31eb9..0000000
--- a/ls1012aqds/cci_barrier_disable.rcw
+++ /dev/null
@@ -1,8 +0,0 @@
-/*
- * PBI Commands for LS1012AQDS and LS1012ARDB
- */
-
-.pbi
-write 0x570178, 0x0000e010
-write 0x180000, 0x00000008
-.end
diff --git a/ls1012aqds/clock_out.rcw b/ls1012aqds/clock_out.rcw
new file mode 100644
index 0000000..86da3c2
--- /dev/null
+++ b/ls1012aqds/clock_out.rcw
@@ -0,0 +1,7 @@
+/*
+ * PBI Commands for LS1012AQDS and LS1012ARDB
+ */
+
+.pbi
+write 0xee1a00,  0x00010000
+.end
diff --git a/ls1012aqds/dcsr_mbist.rcw b/ls1012aqds/dcsr_mbist.rcw
deleted file mode 100644
index 9fa023b..0000000
--- a/ls1012aqds/dcsr_mbist.rcw
+++ /dev/null
@@ -1,8 +0,0 @@
-/*
- * PBI Commands for LS1012AQDS and LS1012ARDB
- * DCSR MBIST register: 0x2200_8040
- */
-
-.pbi
-write 0xee00c0, 0x00004400
-.end
diff --git a/ls1012aqds/serdes_sata.rcw b/ls1012aqds/serdes_sata.rcw
index 16334b3..4aaadd2 100644
--- a/ls1012aqds/serdes_sata.rcw
+++ b/ls1012aqds/serdes_sata.rcw
@@ -4,5 +4,6 @@
  */
 
 .pbi
-write 0xea08dc, 0x00502880
+write 0xea08dc,  0x00502880
+write 0xea08e0,  0x00000400
 .end
diff --git a/ls1012aqds/uboot_address.rcw b/ls1012aqds/uboot_address.rcw
index ad2ac65..5bf104b 100644
--- a/ls1012aqds/uboot_address.rcw
+++ b/ls1012aqds/uboot_address.rcw
@@ -3,5 +3,6 @@
  */
 
 .pbi
-write 0x570204, 0x40100000
+write 0x570600, 0x00000000
+write 0x570604, 0x40100000
 .end
diff --git a/ls1012ardb/R_SPNH_3508/rcw_1000.rcw b/ls1012ardb/R_SPNH_3508/rcw_1000.rcw
deleted file mode 100644
index ff1448f..0000000
--- a/ls1012ardb/R_SPNH_3508/rcw_1000.rcw
+++ /dev/null
@@ -1,54 +0,0 @@
-/*
- * LS1012ARDB RCW for SerDes Protocol 0x3508
- *
- * 1G configuration -- 1 SGMII + 1 PCI + 1 SATA
- *
- * Frequencies:
- *
- * Clock: 125 MHz
- *
- * Core		-- 1000 MHz 
- *
- * Serdes Lanes vs Slot information
- * A SGMII  : lane 1
- * B PCI    : lane 2
- * C empty  : lane 3
- * D SATA   : lane 4
- *
- * Serdes configuration
- * SRDS_PRTCL_S1	: 0x3508
- *
- */
-
-#include <../ls1012aqds/ls1012a.rcwi>
-
-SYS_PLL_RAT=4
-CGA_PLL1_RAT=8
-SRDS_PRTCL_S1=13576
-SRDS_PLL_REF_CLK_SEL_S1=3
-SerDes_REFCLK_SEL=1
-SerDes_INT_REFCLK=1
-PBI_SRC=4
-SYS_PLL_SPD=1
-CGA_PLL1_SPD=1
-EC1_BASE=1
-UART1_BASE=1
-SDHC1_BASE=1
-SDHC2_BASE_DAT321=1
-SDHC2_BASE_BASE=1
-EMI1_BASE=1
-CLK_OUT_BASE=1
-SDHC1_CD=1
-SDHC1_WP=1
-USB1_DRVVBUS_BASE=1
-USB1_PWRFAULT_BASE=1
-SDHC1_VSEL=1
-EVDD_VSEL=2
-SYSCLK_FREQ=600
-
-
-#include <../ls1012aqds/cci_barrier_disable.rcw>
-#include <../ls1012aqds/usb_phy_freq.rcw>
-#include <../ls1012aqds/uboot_address.rcw>
-#include <../ls1012aqds/dcsr_mbist.rcw>
-#include <../ls1012aqds/serdes_sata.rcw>
diff --git a/ls1012ardb/R_SPNH_3508/rcw_800.rcw b/ls1012ardb/R_SPNH_3508/rcw_800.rcw
new file mode 100644
index 0000000..77a086d
--- /dev/null
+++ b/ls1012ardb/R_SPNH_3508/rcw_800.rcw
@@ -0,0 +1,54 @@
+/*
+ * LS1012ARDB RCW for SerDes Protocol 0x3508
+ *
+ * 1G configuration -- 1 SGMII + 1 PCI + 1 SATA
+ *
+ * Frequencies:
+ *
+ * Clock: 125 MHz
+ *
+ * Core		-- 800 MHz (Mul 8)
+ *
+ * Serdes Lanes vs Slot information
+ * A SGMII  : Slot 1
+ * B PCI    : Slot 2
+ * C Empty  : Slot 3
+ * D SATA   : Sata Connector
+ *
+ * Serdes configuration
+ * SRDS_PRTCL_S1	: 0x3508
+ *
+ */
+
+#include <../ls1012aqds/ls1012a.rcwi>
+
+SYS_PLL_RAT=4
+CGA_PLL1_RAT=8
+SRDS_PRTCL_S1=13576
+SRDS_PLL_REF_CLK_SEL_S1=3
+SerDes_REFCLK_SEL=1
+SerDes_INT_REFCLK=1
+PBI_SRC=4
+SYS_PLL_SPD=1
+CGA_PLL1_SPD=1
+EC1_BASE=1
+UART1_BASE=1
+SDHC1_BASE=1
+SDHC2_BASE_DAT321=1
+SDHC2_BASE_BASE=1
+EMI1_BASE=1
+CLK_OUT_BASE=1
+SDHC1_CD=1
+SDHC1_WP=1
+QSPI_IIC2=3
+USB1_DRVVBUS_BASE=1
+USB1_PWRFAULT_BASE=1
+SDHC1_VSEL=1
+EVDD_VSEL=2
+IIC1_BASE=1
+SYSCLK_FREQ=600
+
+#include <../ls1012aqds/uboot_address.rcw>
+#include <../ls1012aqds/usb_phy_freq.rcw>
+#include <../ls1012aqds/serdes_sata.rcw>
+#include <../ls1012aqds/clock_out.rcw>
-- 
1.7.9.5

